<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{administrador/template_admins.html :: head}">
    <title>Crear Recordatorio | BarberMusic Admin</title>
    <style>/* Estilos para los recordatorios */
    .recordatorios-section {
        margin-bottom: 2rem;
    }

    .recordatorios-group {
        margin-bottom: 2rem;
    }

    .recordatorios-group h2 {
        margin-bottom: 1rem;
        font-size: 1.2rem;
        color: var(--color-dark);
    }

    .recordatorios-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1.5rem;
    }

    .recordatorio-card {
        background-color: var(--color-white);
        box-shadow: var(--box-shadow);
        border-radius: var(--border-radius-2);
        padding: 1.5rem;
        transition: all 0.3s ease;
    }

    .dark-mode-variables .recordatorio-card {
        background-color: var(--color-dark);
    }

    .recordatorio-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08);
    }

    .recordatorio-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }

    .recordatorio-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: var(--color-primary-light);
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .recordatorio-icon .material-icons-sharp {
        color: var(--color-primary);
        font-size: 1.2rem;
    }

    .recordatorio-content h3 {
        font-size: 1.1rem;
        margin-bottom: 0.5rem;
        color: var(--color-dark);
    }

    .dark-mode-variables .recordatorio-content h3 {
        color: var(--color-white);
    }

    .recordatorio-content .fecha {
        font-size: 0.85rem;
        color: var(--color-dark-variant);
        margin-bottom: 0.5rem;
    }

    .recordatorio-content .descripcion {
        font-size: 0.9rem;
        color: var(--color-dark-variant);
        margin-bottom: 0.5rem;
        line-height: 1.4;
    }

    .badge {
        display: inline-block;
        padding: 0.25rem 0.5rem;
        font-size: 0.75rem;
        border-radius: 50px;
        display: flex;
        align-items: center;
        width: fit-content;
    }

    .badge .material-icons-sharp {
        font-size: 0.9rem;
        margin-right: 0.25rem;
    }

    .badge-info {
        background-color: rgba(var(--color-info-rgb), 0.1);
        color: var(--color-info);
    }

    .empty-state {
        grid-column: 1 / -1;
        text-align: center;
        padding: 2rem;
        background-color: var(--color-white);
        border-radius: var(--border-radius-2);
        box-shadow: var(--box-shadow);
        color: var(--color-dark-variant);
    }

    .dark-mode-variables .empty-state {
        background-color: var(--color-dark);
        color: var(--color-light);
    }

    .btn-icon {
        background: none;
        border: none;
        cursor: pointer;
        color: var(--color-dark-variant);
        transition: all 0.3s ease;
    }

    .btn-icon:hover {
        color: var(--color-primary);
    }

    .dropdown {
        position: relative;
    }

    .dropdown-menu {
        position: absolute;
        right: 0;
        top: 100%;
        background-color: var(--color-white);
        box-shadow: var(--box-shadow);
        border-radius: var(--border-radius-1);
        min-width: 180px;
        z-index: 100;
        display: none;
        padding: 0.5rem 0;
    }

    .dark-mode-variables .dropdown-menu {
        background-color: var(--color-dark);
    }

    .dropdown-menu.show {
        display: block;
    }

    .dropdown-item {
        display: flex;
        align-items: center;
        padding: 0.5rem 1rem;
        color: var(--color-dark);
        text-decoration: none;
        transition: all 0.3s ease;
    }

    .dark-mode-variables .dropdown-item {
        color: var(--color-light);
    }

    .dropdown-item:hover {
        background-color: var(--color-light);
        color: var(--color-primary);
    }

    .dark-mode-variables .dropdown-item:hover {
        background-color: rgba(255, 255, 255, 0.05);
    }

    .dropdown-item .material-icons-sharp {
        margin-right: 0.5rem;
        font-size: 1rem;
    }

    .actions-bar {
        display: flex;
        justify-content: flex-end;
        margin-bottom: 1.5rem;
    }

    .btn-add {
        display: flex;
        align-items: center;
        padding: 0.5rem 1rem;
        background-color: var(--color-primary);
        color: white;
        border-radius: var(--border-radius-1);
        text-decoration: none;
        transition: all 0.3s ease;
    }

    .btn-add:hover {
        background-color: var(--color-primary-variant);
        transform: translateY(-2px);
    }

    .btn-add .material-icons-sharp {
        margin-right: 0.5rem;
    }

    /* Estilos para los recordatorios en la barra lateral derecha */
    .notification {
        background-color: var(--color-white);
        border-radius: var(--border-radius-1);
        padding: 1rem;
        margin-bottom: 1rem;
        display: flex;
        align-items: flex-start;
        box-shadow: var(--box-shadow);
        transition: all 0.3s ease;
    }

    .dark-mode-variables .notification {
        background-color: var(--color-dark);
    }

    .notification .icon {
        padding: 0.5rem;
        border-radius: 30%;
        margin-right: 1rem;
        display: flex;
    }

    .notification .icon span {
        font-size: 1.5rem;
    }

    .notification .content {
        flex: 1;
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
    }

    .notification .content .info h3 {
        font-size: 0.9rem;
        margin-bottom: 0.2rem;
    }

    .notification .content .info .text_muted {
        font-size: 0.8rem;
        color: var(--color-dark-variant);
    }

    .notification .content .info .reminder-desc {
        font-size: 0.8rem;
        margin-top: 0.5rem;
        color: var(--color-dark-variant);
    }

    /* Estilo para recordatorios activos/inactivos */
    .notification.deactive {
        background-color: var(--color-light);
    }

    .notification.deactive .icon {
        background: var(--color-light);
    }

    .notification.deactive .icon span,
    .notification.deactive .content .info h3,
    .notification.deactive .content .info .text_muted {
        color: var(--color-dark-variant);
    }

    .notification .dropdown-toggle {
        cursor: pointer;
    }

    /* Añadir recordatorio */
    .notification.add-reminder {
        background-color: transparent;
        border: 2px dashed var(--color-info-dark);
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: none;
        display: block;
        text-align: center;
    }

    .notification.add-reminder:hover {
        border-color: var(--color-primary);
        background-color: var(--color-light);
    }

    .notification.add-reminder a {
        text-decoration: none;
        color: var(--color-dark);
        display: block;
    }

    .dark-mode-variables .notification.add-reminder a {
        color: var(--color-light);
    }

    .notification.add-reminder div {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .notification.add-reminder span {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
        color: var(--color-primary);
    }

    .notification.add-reminder h3 {
        font-size: 0.9rem;
        font-weight: 500;
    }</style>
</head>

<body>
<div class="container">
    <!-- Sidebar -->
    <div th:replace="~{administrador/template_admins.html :: aside}"></div>

    <!-- Main Content -->
    <main class="edit-agendamiento-main">
        <!-- Encabezado -->
        <div class="page-header">
            <h1>
                <span class="material-icons-sharp">notifications_active</span>
                Crear Recordatorio
            </h1>
            <nav class="breadcrumbs">
                <a th:href="@{/administrador}">Inicio</a>
                <span class="material-icons-sharp">chevron_right</span>
                <a th:href="@{/recordatorios}">Recordatorios</a>
                <span class="material-icons-sharp">chevron_right</span>
                <span>Nuevo</span>
            </nav>
        </div>

        <!-- Formulario de Creación -->
        <section class="edit-agendamiento-section">
            <div class="card">
                <div class="card-header">
                    <h2>Nuevo Recordatorio</h2>
                </div>

                <div class="card-body">
                    <form th:action="@{/recordatorios/save}" method="post" class="agendamiento-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="titulo">Título</label>
                                <input type="text" id="titulo" name="titulo" class="form-control"
                                       placeholder="Título del recordatorio" required>
                            </div>

                            <div class="form-group">
                                <label for="descripcion">Descripción</label>
                                <textarea id="descripcion" name="descripcion" class="form-control"
                                          placeholder="Descripción detallada"></textarea>
                            </div>

                            <div class="form-group">
                                <label for="fechaHora">Fecha y Hora</label>
                                <input type="datetime-local" id="fechaHora" name="fechaHora"
                                       class="form-control" required>
                            </div>

                            <div class="form-group">
                                <label>¿Fijar recordatorio?</label>
                                <div class="form-check">
                                    <input type="checkbox" id="fijado" name="fijado" class="form-check-input">
                                    <label for="fijado" class="form-check-label">Mostrar primero en la lista</label>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">
                                <span class="material-icons-sharp">save</span>
                                Guardar Recordatorio
                            </button>
                            <a th:href="@{/recordatorios}" class="btn btn-secondary">
                                <span class="material-icons-sharp">cancel</span>
                                Cancelar
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <!-- Right Section -->
    <div th:replace="~{administrador/template_admins.html :: right_section}"></div>
</div>

<div th:replace="~{administrador/template_admins.html :: jsFiles}"></div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Establecer fecha mínima como hoy
        const fechaHoraInput = document.getElementById('fechaHora');
        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');

        fechaHoraInput.min = `${year}-${month}-${day}T${hours}:${minutes}`;

        // Establecer fecha predeterminada como ahora + 1 hora
        const defaultDate = new Date(now.getTime() + 60 * 60 * 1000);
        const defaultYear = defaultDate.getFullYear();
        const defaultMonth = String(defaultDate.getMonth() + 1).padStart(2, '0');
        const defaultDay = String(defaultDate.getDate()).padStart(2, '0');
        const defaultHours = String(defaultDate.getHours()).padStart(2, '0');
        const defaultMinutes = String(defaultDate.getMinutes()).padStart(2, '0');

        fechaHoraInput.value = `${defaultYear}-${defaultMonth}-${defaultDay}T${defaultHours}:${defaultMinutes}`;
    });
</script>
</body>

</html>